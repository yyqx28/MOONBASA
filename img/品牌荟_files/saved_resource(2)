(function (A) { A.mola = A.extend({ ifrmlogin: function (D) { D = A.extend({ loginback: null, registerback: null, hostidx: 0 }, D || {}); if (D.hostidx == 0) { document.domain = A("#hDomain").val() } var B = D.hostidx > 0 ? "?host=" + D.hostidx : ""; A('<div id="ifrmloginDialog"><iframe src="" height="407px" width="490px" style="border:0;display:none;" frameborder="0"></iframe><span style="width:490px;height:407px;display:block;">数据努力加载中......</span></div>').hide().appendTo(A("body")); A("#ifrmloginDialog").dialog({ autoOpen: true, title: "您尚未登录", width: 510, modal: true, resizable: false }); if (A("#ifrmloginDialog iframe").attr("src") == "") { A("#ifrmloginDialog iframe").attr("src", LoginDomain + "/iframev2/login" + B) } A("#ifrmloginDialog iframe").load(function () { A(this).show().siblings("span").remove() }); if (D.loginback) { A.mola = A.extend(true, { iframe: { loginback: function () { C(); D.loginback.call(this) } } }, A.mola || {}) } if (D.registerback) { A.mola = A.extend(true, { iframe: { registerback: function () { C(); D.registerback.call(this) } } }, A.mola || {}) } function C() { A("#ifrmloginDialog").dialog("close"); A.mola.message(); A.mola.minicart() } } }, A.mola || {}); A.fn.ifrmlogin = function (B) { this.click(function () { A.mola.ifrmlogin(B) }) } })(jQuery);
